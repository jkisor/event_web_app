<div class="container">
	<h2>Events</h2>
	<h6>Signed in as: <a ng-click="showUser()">{{ user.name }}</a></h6>
    <div ng-show="permission.admin"> 
        <button class="btn btn-primary" ng-click="createEvent()">Create Event</button>
    </div>
    <span ng-show="user != null"> 
        <button class="btn btn-primary" ng-click="signOut()">Sign Out</button>
    </span>

    <br/>
    <br/>
    <div class="row">
        <div class="input-group input-group">
                <span class="input-group-addon"> 
                    <i class="glyphicon glyphicon-search"></i>
                </span> 
                <input type="text" class="form-control" placeholder="Search" ng-model="search.name">
        </div>
    </div>
    <br/>
    <br/>
    <rsvp-tabs>
      <rsvp-pane title="My Events">
        <ul class="list-group">
           <!--  <li class="list-group-item" ng-repeat="event in user.events | filter:search"> -->
            <li class="list-group-item" ng-repeat="event in events | filter:search | attendedBy: user">
                
                <button class="btn btn-primary" ng-click="unattend(event)">Unattend</button>
                
                <a ng-click="printEvent(event)">{{event.name}}</a>
                
                <br/>
                <div ng-show="permission.admin"> 

                    <div class="btn-group">
                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                        Attendees <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" role="menu">
                            <li class="list-group-item" ng-repeat="u in event.users">
                                <a ng-click="">{{u.name}}</a>
                            </li>
                        </ul>
                    </div>

                    <button class="btn btn-primary" ng-click="edit(event.id)">Edit</button>
                </div>

<!--                 <ul class="list-group">
                    <li class="list-group-item" ng-repeat="u in event.users">
                        <a ng-click="">{{u.name}}</a>
                    </li>
                </ul> -->

            </li>
        </ul>
      </rsvp-pane>
      <rsvp-pane title="Available Events">
            <li class="list-group-item" ng-repeat="event in events | filter:search | availableEvents: user">
                <button class="btn btn-primary" ng-click="attend(event)">Attend</button>
                <a ng-click="printEvent(event)">{{event.name}}</a> 

                <br/>

                <div ng-show="permission.admin"> 

                    <div class="btn-group">
                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                        Attendees <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" role="menu">
                            <li class="list-group-item" ng-repeat="u in event.users">
                                <a ng-click="">{{u.name}}</a>
                            </li>
                        </ul>
                    </div>
                    <br/>
                    <button class="btn btn-primary" ng-click="edit(event.id)">Edit</button>
                </div>
<!--                 <ul class="list-group">
                    <li class="list-group-item" ng-repeat="u in event.users">
                        <a ng-click="">{{u.name}}</a>
                    </li>
                </ul>    -->          
            </li>
      </rsvp-pane>
    </rsvp-tabs>

    
</div>